http://os.mbed.com/teams/components/code/C12832/#03069e3deaa4b9054ee5ef6db455fd9c09ea6b71